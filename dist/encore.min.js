/**
 * Copyright (c) 2017-present, Visual Data Systems, Inc. All rights reserved.
 *
 * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
 * copy, modify, and distribute this software in source code or binary form for use
 * in connection with the web services and APIs provided by Facebook.
 *
 * As with any software that integrates with the Facebook platform, your use of
 * this software is subject to the VDS Platform Policy. This copyright notice shall be
 * included in all copies or substantial portions of the software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(e){var t,n={_revenueEndpoint:"http://e2.getencore.com/api/js/revenue/",_readyInterval:"",_revenueid:"",_params:{},_debug:!1,send:function(){if(this._revenueid&&0!=Object.keys(this._params).length&&this._isValidEmail(this._params.Email)){var e=t.param(this._params);if(i.base64Encrypt(e)!=i.get("encoreRevenue")){var n=this._revenueEndpoint+this._revenueid;r.send({url:n,data:e});i.set("encoreRevenue",e),this._params={},this._console("Sent")}}},set:function(e,t){(e=e||"")&&(t=t||"",this._params[e]=t,this._console(e+":"+t))},setAll:function(e){if(e=e||"",t.isPlainObject(e)){var n=this;t.each(e,function(e,t){n.set(e,t)})}},setRevenueid:function(e){e=e||"",this._revenueid=e,this._console("Revenueid:"+e)},debug:function(e){e=e||!1,this._debug=e},_isValidEmail:function(e){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},_console:function(e){e=e||"",!0===this._debug&&console.log(e)},_urlencode:function(e){return e+="",encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_urldecode:function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))},_encoreReady:function(){t(document).ready(function(){!function(){try{var r,i,o,s=e.EncoreObject||"encore";o=function(){var e=arguments;if(e.length<2||"_"==e[1].charAt(0))return!0;if(r=e[0],i=Array.prototype.slice.call(e).slice(2),"revenue"==r)try{return n[e[1]]&&n[e[1]].apply(n,i)}catch(e){console.log(e)}else if("subscribe"==r)try{return a[e[1]]&&a[e[1]].apply(a,i)}catch(e){console.log(e)}};var c=e[s];(c=c&&c.q)&&c.length>0&&t.each(c,function(e,t){o.apply(this,t)}),e[s]=o}catch(e){console.log(e)}}(),e.clearInterval(n._readyInterval)})}},a={_subscribeEndpoint:"http://e2.getencore.com/api/js/form/capture/",_formid:"",_params:{},_debug:!1,send:function(){if(this._formid&&n._isValidEmail(this._params.Email)){this._params.memberfield_6=this._params.Email;var e=t.param(this._params);if(i.base64Encrypt(e)!=i.get("encoreSubscribe")){var a=this._subscribeEndpoint+this._formid;r.send({url:a,data:e});i.set("encoreSubscribe",e),this._params={},this._console("Sent")}}},set:function(e,t){"Email"==(e=e||"")&&(t=t||"",this._params[e]=t,this._console(e+":"+t))},setFormid:function(e){e=e||"",this._formid=e,this._console("Formid:"+e)},debug:function(e){e=e||!1,this._debug=e},_console:function(e){e=e||"",!0===this._debug&&console.log(e)}},r={send:function(e){if((e=e||{}).url)return e.data=e.data||{},e.dataType=e.dataType||"jsonp",e.cache=e.cache||!1,e.done=e.done||"",e.fail=e.fail||"",e.always=e.always||"",t.ajax({type:"GET",url:e.url,data:e.data,dataType:e.dataType,cache:e.cache,jsonp:""}).done(e.done).fail(e.fail).always(e.always)}},i={set:function(t,n,a){(a=a||{}).path=a.path||"/",a.domain=a.domain||e.location.hostname.split(".").slice(-2).join("."),a.expires=a.expires||1,null===n&&(n="",a.expires=-1);var r,i="";a.expires&&("number"==typeof a.expires||a.expires.toUTCString)&&("number"==typeof a.expires?(r=new Date).setTime(r.getTime()+24*a.expires*60*60*1e3):r=a.expires,i="; expires="+r.toUTCString());var o="; path="+a.path,s=a.domain?"; domain="+a.domain:"",c=a.secure?"; secure":"";document.cookie=[t,"=",this.base64Encrypt(n),i,o,s,c].join("")},get:function(e,t){t=t||!1;if(document.cookie&&""!=document.cookie){var n=""+document.cookie,a=n.indexOf(e);if(void 0===e||""===e||-1===a)return"";var r=n.indexOf(";",a);return-1==r&&(r=n.length),t?this.base64Decrypt(n.substring(a+e.length+1,r)):n.substring(a+e.length+1,r)}return""},remove:function(e){this.get(e)&&this.set(e,null)},base64Encrypt:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],a=0;a<e.length;){var r=e.charCodeAt(a++),i=e.charCodeAt(a++),o=e.charCodeAt(a++),s=(r<<16)+((i||0)<<8)+(o||0),c=(s&63<<18)>>18,l=(258048&s)>>12,u=isNaN(i)?64:(4032&s)>>6,d=isNaN(o)?64:63&s;n[n.length]=t.charAt(c),n[n.length]=t.charAt(l),n[n.length]=t.charAt(u),n[n.length]=t.charAt(d)}return n.join("")},base64Decrypt:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=e.length%4!=0,a=new RegExp("[^"+t+"]").test(e),r=/=/.test(e)&&(/=[^=]/.test(e)||/={3}/.test(e));if(n||a||r)throw new Error("Invalid base64 data");for(var i=[],o=0;o<e.length;){var s=t.indexOf(e.charAt(o++)),c=t.indexOf(e.charAt(o++)),l=t.indexOf(e.charAt(o++)),u=t.indexOf(e.charAt(o++)),d=(s<<18)+(c<<12)+((63&l)<<6)+(63&u),h=(d&255<<16)>>16,p=64==l?-1:(65280&d)>>8,f=64==u?-1:255&d;i[i.length]=String.fromCharCode(h),p>=0&&(i[i.length]=String.fromCharCode(p)),f>=0&&(i[i.length]=String.fromCharCode(f))}return i.join("")}},o=function(){n._readyInterval=e.setInterval(n._encoreReady,500)};void 0===e.jQuery||parseInt(e.jQuery.fn.jquery.split(".").join(""))<180?function(e,t){t=t||"";var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a),n.onload=n.onreadystatechange=function(){n.readyState&&!/complete|loaded/.test(n.readyState)||(t&&t(),n.onload=null,n.onreadystatechange=null)}}("https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js",function(){t=e.jQuery.noConflict(!0),o()}):(t=e.jQuery,o())}(window);