/**
 * Copyright (c) 2017-present, Visual Data Systems, Inc. All rights reserved.
 *
 * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
 * copy, modify, and distribute this software in source code or binary form for use
 * in connection with the web services and APIs provided by Facebook.
 *
 * As with any software that integrates with the Facebook platform, your use of
 * this software is subject to the VDS Platform Policy. This copyright notice shall be
 * included in all copies or substantial portions of the software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(e){"use strict";var t,n={_revenueEndpoint:"http://e2.getencore.com/api/js/revenue/",_readyInterval:"",_revenueid:"",_params:{},_debug:!1,send:function(){if(this._revenueid&&0!=Object.keys(this._params).length){var e=t.param(this._params);if(a.base64Encrypt(e)!=a.get("encoreRevenue")){var n=this._revenueEndpoint+this._revenueid;r.send({url:n,data:e});a.set("encoreRevenue",e),this._params={},this._console("Sent")}}},set:function(e,t){(e=e||"")&&(t=t||"",this._params[e]=t,this._console(e+":"+t))},setAll:function(e){if(e=e||"",t.isPlainObject(e)){var n=this;t.each(e,function(e,t){n.set(e,t)})}},setRevenueid:function(e){e=e||"",this._revenueid=e,this._console("Revenueid:"+e)},debug:function(e){e=e||!1,this._debug=e},_console:function(e){e=e||"",!0===this._debug&&console.log(e)},_urlencode:function(e){return e+="",encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_urldecode:function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))},_encoreReady:function(){t(document).ready(function(){e.clearInterval(n._readyInterval),function(){try{var r,a,i=e.EncoreObject||"encore",o=e[i];(o=o&&o.q).length>0&&t.each(o,function(e,t){if(t.length<2||"_"==t[1].charAt(0))return!0;r=t[0],a=Array.prototype.slice.call(t).slice(2),"revenue"==r&&n[t[1]]&&n[t[1]].apply(n,a)})}catch(e){console.log(e)}}()})}},r={send:function(e){if((e=e||{}).url)return e.data=e.data||{},e.dataType=e.dataType||"jsonp",e.cache=e.cache||!1,e.done=e.done||"",e.fail=e.fail||"",e.always=e.always||"",t.ajax({type:"GET",url:e.url,data:e.data,dataType:e.dataType,cache:e.cache,jsonp:""}).done(e.done).fail(e.fail).always(e.always)}},a={set:function(t,n,r){(r=r||{}).path=r.path||"/",r.domain=r.domain||e.location.hostname.split(".").slice(-2).join("."),r.expires=r.expires||1,null===n&&(n="",r.expires=-1);var a,i="";r.expires&&("number"==typeof r.expires||r.expires.toUTCString)&&("number"==typeof r.expires?(a=new Date).setTime(a.getTime()+24*r.expires*60*60*1e3):a=r.expires,i="; expires="+a.toUTCString());var o="; path="+r.path,c=r.domain?"; domain="+r.domain:"",s=r.secure?"; secure":"";document.cookie=[t,"=",this.base64Encrypt(n),i,o,c,s].join("")},get:function(e,t){t=t||!1;if(document.cookie&&""!=document.cookie){var n=""+document.cookie,r=n.indexOf(e);if(void 0===e||""===e||-1===r)return"";var a=n.indexOf(";",r);return-1==a&&(a=n.length),t?this.base64Decrypt(n.substring(r+e.length+1,a)):n.substring(r+e.length+1,a)}return""},remove:function(e){this.get(e)&&this.set(e,null)},base64Encrypt:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],r=0;r<e.length;){var a=e.charCodeAt(r++),i=e.charCodeAt(r++),o=e.charCodeAt(r++),c=(a<<16)+((i||0)<<8)+(o||0),s=(c&63<<18)>>18,d=(258048&c)>>12,u=isNaN(i)?64:(4032&c)>>6,l=isNaN(o)?64:63&c;n[n.length]=t.charAt(s),n[n.length]=t.charAt(d),n[n.length]=t.charAt(u),n[n.length]=t.charAt(l)}return n.join("")},base64Decrypt:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=e.length%4!=0,r=new RegExp("[^"+t+"]").test(e),a=/=/.test(e)&&(/=[^=]/.test(e)||/={3}/.test(e));if(n||r||a)throw new Error("Invalid base64 data");for(var i=[],o=0;o<e.length;){var c=t.indexOf(e.charAt(o++)),s=t.indexOf(e.charAt(o++)),d=t.indexOf(e.charAt(o++)),u=t.indexOf(e.charAt(o++)),l=(c<<18)+(s<<12)+((63&d)<<6)+(63&u),h=(l&255<<16)>>16,p=64==d?-1:(65280&l)>>8,f=64==u?-1:255&l;i[i.length]=String.fromCharCode(h),p>=0&&(i[i.length]=String.fromCharCode(p)),f>=0&&(i[i.length]=String.fromCharCode(f))}return i.join("")}},i=function(){n._readyInterval=e.setInterval(n._encoreReady,500)};void 0===e.jQuery||parseInt(e.jQuery.fn.jquery.split(".").join(""))<180?function(e,t){t=t||"";var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),n.onload=n.onreadystatechange=function(){n.readyState&&!/complete|loaded/.test(n.readyState)||(t&&t(),n.onload=null,n.onreadystatechange=null)}}("https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js",function(){t=e.jQuery.noConflict(!0),i()}):(t=e.jQuery,i())}(window);