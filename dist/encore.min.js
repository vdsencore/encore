/**
 * Copyright (c) 2017-present, Visual Data Systems, Inc. All rights reserved.
 *
 * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
 * copy, modify, and distribute this software in source code or binary form for use
 * in connection with the web services and APIs provided by Facebook.
 *
 * As with any software that integrates with the Facebook platform, your use of
 * this software is subject to the VDS Platform Policy. This copyright notice shall be
 * included in all copies or substantial portions of the software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(e){var t,revenue={_revenueEndpoint:"http://e2.getencore.com/api/js/revenue/",_readyInterval:"",_revenueid:"",_params:{},_debug:!1,send:function(){if(this._revenueid&&0!=Object.keys(this._params).length&&this._isValidEmail(this._params["Email"])){var e=t.param(this._params);if(r.base64Encrypt(e)!=r.get("encoreRevenue")){var a=this._revenueEndpoint+this._revenueid,i=n.send({url:a,data:e,done:function(e){revenue._console(JSON.stringify(e)),"SUCCESS"==e.status?(revenue._console("success"),t(document).trigger("encore.revenue.success",e.data)):e.error.message&&t(document).trigger("encore.revenue.error",e.error)},fail:function(e,n,r){t(document).trigger("encore.revenue.error",r),revenue._console(n+": "+(r||e.url))}});r.set("encoreRevenue",e),this._params={}}}},set:function(e,t){(e=e||"")&&(t=t||"",this._params[e]=t,this._console(e+":"+t))},setAll:function(e){if(e=e||"",t.isPlainObject(e)){var n=this;t.each(e,function(e,t){n.set(e,t)})}},setRevenueid:function(e){e=e||"",this._revenueid=e,this._console("Revenueid:"+e)},debug:function(e){e=e||!1,this._debug=e},_isValidEmail:function(e){var t;return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},_console:function(e){e=e||"",!0===this._debug&&console.log(e)},_urlencode:function(e){return e+="",encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_urldecode:function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))},_encoreReady:function(){t(document).ready(function(){!function(){try{var n=e.EncoreObject||"encore",r,a,i;i=function(){var e=arguments;if(e.length<2||"_"==e[1].charAt(0))return!0;if(r=e[0],a=Array.prototype.slice.call(e).slice(2),"revenue"==r)try{return revenue[e[1]]&&revenue[e[1]].apply(revenue,a)}catch(e){console.log(e)}else if("subscribe"==r)try{return subscribe[e[1]]&&subscribe[e[1]].apply(subscribe,a)}catch(e){console.log(e)}};var o=e[n];(o=o&&o.q)&&o.length>0&&t.each(o,function(e,t){i.apply(this,t)}),e[n]=i}catch(e){console.log(e)}}(),e.clearInterval(revenue._readyInterval)})}},subscribe={_subscribeEndpoint:"http://e2.getencore.com/api/js/form/capture/",_formid:"",_params:{},_debug:!1,send:function(){if(this._formid&&revenue._isValidEmail(this._params["Email"])){this._params["memberfield_6"]=this._params["Email"];var e=t.param(this._params);if(r.base64Encrypt(e)!=r.get("encoreSubscribe")){var a=this._subscribeEndpoint+this._formid,i=n.send({url:a,data:e,done:function(e,n,r){subscribe._console(JSON.stringify(e)),"SUCCESS"==e.status?(subscribe._console("success"),t(document).trigger("encore.subscribe.success",e.data)):e.error.message&&t(document).trigger("encore.subscribe.error",e.error)},fail:function(e,n,r){t(document).trigger("encore.subscribe.error",r),subscribe._console(n+": "+(r||e.url))}});r.set("encoreSubscribe",e),this._params={}}}},set:function(e,t){e=e||"",t=t||"",this._params[e]=t,this._console(e+":"+t)},setFormid:function(e){e=e||"",this._formid=e,this._console("Formid:"+e)},debug:function(e){e=e||!1,this._debug=e},_console:function(e){e=e||"",!0===this._debug&&console.log(e)}},encorecallback=function(e){return e},n={send:function(e){var n;if((e=e||{}).url)return e.data=e.data||{},e.cache=e.cache||!1,e.done=e.done||"",e.fail=e.fail||"",e.always=e.always||"",t.ajax({timeout:5e3,type:"GET",url:e.url,data:e.data,cache:e.cache,dataType:"jsonp",jsonp:!1,jsonpCallback:"encorecallback"}).done(e.done).fail(e.fail).always(e.always)}},r={set:function(t,n,r){(r=r||{}).path=r.path||"/",r.domain=r.domain||e.location.hostname.split(".").slice(-2).join("."),r.expires=r.expires||1,null===n&&(n="",r.expires=-1);var a="",i;r.expires&&("number"==typeof r.expires||r.expires.toUTCString)&&("number"==typeof r.expires?(i=new Date).setTime(i.getTime()+24*r.expires*60*60*1e3):i=r.expires,a="; expires="+i.toUTCString());var o="; path="+r.path,s=r.domain?"; domain="+r.domain:"",c=r.secure?"; secure":"";document.cookie=[t,"=",this.base64Encrypt(n),a,o,s,c].join("")},get:function(e,t){t=t||!1;var n="";if(document.cookie&&""!=document.cookie){var r=""+document.cookie,a=r.indexOf(e);if(void 0===e||""===e||-1===a)return"";var i=r.indexOf(";",a);return-1==i&&(i=r.length),t?this.base64Decrypt(r.substring(a+e.length+1,i)):r.substring(a+e.length+1,i)}return n},remove:function(e){this.get(e)&&this.set(e,null)},base64Encrypt:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],r=0;r<e.length;){var a=e.charCodeAt(r++),i=e.charCodeAt(r++),o=e.charCodeAt(r++),s=(a<<16)+((i||0)<<8)+(o||0),c=(s&63<<18)>>18,u=(s&63<<12)>>12,l=isNaN(i)?64:(s&63<<6)>>6,d=isNaN(o)?64:63&s;n[n.length]=t.charAt(c),n[n.length]=t.charAt(u),n[n.length]=t.charAt(l),n[n.length]=t.charAt(d)}return n.join("")},base64Decrypt:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=e.length%4!=0,r=new RegExp("[^"+t+"]").test(e),a=/=/.test(e)&&(/=[^=]/.test(e)||/={3}/.test(e));if(n||r||a)throw new Error("Invalid base64 data");for(var i=[],o=0;o<e.length;){var s=t.indexOf(e.charAt(o++)),c=t.indexOf(e.charAt(o++)),u=t.indexOf(e.charAt(o++)),l=t.indexOf(e.charAt(o++)),d=(s<<18)+(c<<12)+((63&u)<<6)+(63&l),h=(d&255<<16)>>16,p=64==u?-1:(d&255<<8)>>8,f=64==l?-1:255&d;i[i.length]=String.fromCharCode(h),p>=0&&(i[i.length]=String.fromCharCode(p)),f>=0&&(i[i.length]=String.fromCharCode(f))}return i.join("")}},a=function(e,t){t=t||"";var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),n.onload=n.onreadystatechange=function(){var e;n.readyState&&!/complete|loaded/.test(n.readyState)||(t&&t(),n.onload=null,n.onreadystatechange=null)}},i=function(){revenue._readyInterval=e.setInterval(revenue._encoreReady,500)};void 0===e.jQuery||parseInt(e.jQuery.fn.jquery.split(".").join(""))<180?a("https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js",function(){t=e.jQuery.noConflict(!0),i()}):(t=e.jQuery,i())}(window,void 0);